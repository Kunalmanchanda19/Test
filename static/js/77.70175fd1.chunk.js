"use strict";(self.webpackChunkattendance_marking_system=self.webpackChunkattendance_marking_system||[]).push([[77],{9077:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});var r=t(1889),n=t(890),l=t(6989),i=t(3786),d=t(4294),s=t(2791),o=t(9823),c=t(8946),h=t(4392),u=t(4750),m=t(1652),x=t(1666),g=t(4894),b=t(4560),j=t(7892),v=t.n(j),p=t(184);const C=[{id:1,label:"Last 2 hrs",value:"2hrs"},{id:2,label:"Last 24 hrs",value:"24hrs"},{id:3,label:"Last 7 days",value:"7days"},{id:4,label:"Custom",value:"cust"}],f=[{field:"rfidSerial",headerName:"Rfid Serial",width:220,disableColumnMenu:!0,headerAlign:"center",align:"center",renderCell:e=>(0,p.jsx)(r.ZP,{item:!0,children:(0,p.jsx)(n.Z,{variant:"body1",align:"center",children:e.value})})},{field:"attendanceDate",headerName:"Attendance Date",width:220,disableColumnMenu:!0,headerAlign:"center",align:"center",renderCell:e=>(0,p.jsx)(r.ZP,{item:!0,children:(0,p.jsx)(n.Z,{variant:"body1",align:"center",children:e.value})})},{field:"isSynced",headerName:"Is Synced",width:180,disableColumnMenu:!0,headerClassName:"text-center",headerAlign:"center",align:"center",renderCell:e=>(0,p.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value?(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,{style:{color:"#40bf40\t\t"}})}):(0,p.jsx)("div",{children:(0,p.jsx)(o.Z,{style:{color:"red"}})})})},{field:"terminalIP",headerName:"Terminal IP",width:220,disableColumnMenu:!0,headerClassName:"text-center",headerAlign:"center",align:"center",renderCell:e=>(0,p.jsx)(r.ZP,{item:!0,children:(0,p.jsx)(n.Z,{variant:"body1",align:"center",children:e.value})})},{field:"sewadarId",headerName:"Sewadar Id",headerAlign:"center",align:"center",type:"number",width:220,disableColumnMenu:!0,renderCell:e=>(0,p.jsx)(r.ZP,{item:!0,children:(0,p.jsx)(n.Z,{variant:"body1",align:"center",children:e.value})})}],Z=e=>{var a;let{Machines:t,ControllerGuid:o}=e;const[c,j]=s.useState([]),Z=c.map(((e,a)=>({...e,id:a+1}))),y=t.find((e=>e.guid===o)),w=v()().format("YYYY-MM-DD HH:mm:ss"),M=v()(),S=M.subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),[D,P]=s.useState(C[0].value),[k,T]=s.useState({ControllerGuid:y?y.guid:t.length>0?t[0].guid:"",StartDate:S,EndDate:w});document.title="Attendance Reports";const N=(null!==(a="http://localhost:3003")?a:"")+"/api/Attendance/GetControllerAttendanceLogs";const Y=()=>{try{(async function(e,a){try{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){const e=await t.json();throw new Error("HTTP error! Status: ".concat(t.status,". Message: ").concat(e.message))}const r=await t.json();return j(r.data),r}catch(t){throw console.error("Error:",t),t instanceof TypeError&&t.message.includes("Failed to fetch")&&console.error("Network error. Please check your internet connection."),alert("unable to fetch data"),t}})(N,k)}catch(e){console.error("Error:",e)}},A=e=>e?v()(e).format("YYYY-MM-DD HH:mm:ss"):"",E=k.ControllerGuid.length<=0;return(0,s.useEffect)((()=>{T((e=>{if("2hrs"===D){const a=M.subtract(2,"hour");return{...e,StartDate:A(a)}}if("24hrs"===D){const a=M.subtract(1,"day");return{...e,StartDate:A(a)}}if("7days"===D){const a=M.subtract(7,"day");return{...e,StartDate:A(a)}}return e}))}),[D,c]),(0,p.jsxs)(r.ZP,{container:!0,spacing:2,className:" p-2",children:[(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:4,md:4,lg:4,xl:2.5,children:(0,p.jsx)(l.Z,{select:!0,label:"Machine",sx:{},value:k.ControllerGuid,onChange:e=>{T({...k,ControllerGuid:e.target.value})},fullWidth:!0,children:t.map(((e,a)=>(0,p.jsxs)(i.Z,{value:e.guid,children:["Machine ",a+1,"\xa0",e.location]},e.guid)))})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:4,md:4,lg:4,xl:1.5,children:(0,p.jsx)(l.Z,{select:!0,label:"Duration",value:D,onChange:e=>{P(e.target.value)},sx:{width:"100%"},fullWidth:!0,children:C.map((e=>(0,p.jsx)(i.Z,{value:e.value,children:e.label},e.id)))})}),"cust"===D?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:2,md:2,lg:2,xl:3,sx:{marginTop:-1},children:(0,p.jsx)(m._,{dateAdapter:u.y,children:(0,p.jsx)(b.C,{components:["DateTimePicker"],children:(0,p.jsx)(x.x,{label:"From date",value:v()(k.StartDate),onChange:e=>{T({...k,StartDate:A(e)})}})})})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:2,md:2,lg:2,xl:3,className:"",sx:{marginTop:-1},children:(0,p.jsx)(m._,{dateAdapter:u.y,children:(0,p.jsx)(b.C,{components:["DateTimePicker"],children:(0,p.jsx)(x.x,{label:"To date",value:v()(k.EndDate),onChange:e=>{T({...k,EndDate:A(e)})}})})})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:2,md:2,lg:2,xl:1.5,sx:{marginTop:1,paddingY:2},className:"",children:(0,p.jsx)(d.Z,{variant:"contained",fullWidth:!0,sx:{},onClick:Y,disabled:E,children:"FETCH"})})]}):(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:2,md:2,lg:2,xl:2,sx:{marginTop:1,paddingY:2},className:"",children:(0,p.jsx)(d.Z,{variant:"contained",fullWidth:!0,sx:{},onClick:Y,disabled:E,children:"FETCH"})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:6,lg:8,xl:8,children:(0,p.jsxs)(n.Z,{variant:"h6",color:"text.secondary",children:["Allowed : ",(0,p.jsx)("span",{className:"font-semibold text-black",children:"24/30"})]})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:4,className:"p-2 text-right",children:(0,p.jsxs)(d.Z,{variant:"outlined",sx:{},children:[(0,p.jsx)(h.Z,{}),"Download"]})}),(0,p.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:12,children:(0,p.jsx)("div",{style:{height:550,width:"100%"},children:(0,p.jsx)(g._$,{rows:Z,rowHeight:60,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},sx:{fontWeight:400,fontSize:14,borderRadius:3,padding:5,borderColor:"black",borderStyle:"dashed",paddingRight:5,"& .MuiDataGrid-row":{height:30,border:1,borderColor:"#EDEFF1",width:"99.5%",marginTop:1,borderRadius:2},"& .MuiDataGrid-columnHeaders":{width:"99.5%",marginBottom:2,boxShadow:2,backgroundColor:"#F4F6F8",borderRadius:3},"& .MuiDataGrid-footerContainer":{},"& .MuiTablePagination-selectLabel":{color:"rgba(0, 54, 101, 0.6)"},"& .MuiSelect-select":{color:"#003665"},"& .MuiTablePagination-displayedRows":{color:"#003665"},"& .MuiSvgIcon-root":{color:"#003665"},"&>.MuiDataGrid-main":{"& div div div div >.MuiDataGrid-cell":{borderBottom:"none"}}},pageSizeOptions:[5,10],disableRowSelectionOnClick:!0})})})]})}},8946:(e,a,t)=>{var r=t(4836);a.Z=void 0;var n=r(t(5649)),l=t(184);a.Z=(0,n.default)((0,l.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline")},9823:(e,a,t)=>{var r=t(4836);a.Z=void 0;var n=r(t(5649)),l=t(184);a.Z=(0,n.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);
//# sourceMappingURL=77.70175fd1.chunk.js.map